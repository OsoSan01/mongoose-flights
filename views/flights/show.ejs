<%- include('../partials/header') %>

<h2>Flight Details:</h2>
<p>Airline: <%= flight.airline %></p>
<p>Flight Number: <%= flight.flightNo %></p>
<p>Departure Airport: <%= flight.airport %></p>

<h3>Destinations:</h3>
<ul>
  <% flight.destinations.forEach(destination => { %>
    <li><%= destination.airport %> (Arrival: <%= destination.arrival %>)</li>
  <% }); %>
</ul>
<h3>Add Destination:</h3>
<form action="/flights/<%= flight._id %>/destinations" method="POST">
  <label>Airport Code:
    <select name="airport">
      <option value="AUS">AUS - Australia</option>
      <option value="DFW">DFW - Dallas</option>
      <option value="DEN">DEN - Denver</option>
      <option value="LAX">LAX - Los Angeles</option>
      <option value="SAN">SAN - San Francisco</option>
      <option value="MXN">MXN - Mexico</option>
      <option value="DXB">DXB - Dubai</option>
    </select>
  </label><br>
  <label>Arrival Date/Time:
    <input type="datetime-local" name="arrival" required>
  </label><br>
  <button type="submit">Add Destination</button>
</form>

<div>
  <a href="/flights/<%= flight._id %>/edit">Edit Flight</a>
  <form action="/flights/<%= flight._id %>?_method=DELETE" method="POST">
    <button type="submit">Delete Flight</button>
  </form>
</div>

<%- include('../partials/header') %>

<script>
  function formatDate(dateString) {
    const date = new Date(dateString);
    const year = date.getFullYear();
    const month = ('0' + (date.getMonth() + 1)).slice(-2);
    const day = ('0' + date.getDate()).slice(-2);
    const hours = ('0' + date.getHours()).slice(-2);
    const minutes = ('0' + date.getMinutes()).slice(-2);
    return `${year}-${month}-${day}T${hours}:${minutes}`;
  }
</script>